# ALSA

ALSA (Advanced Linux Sound Architecture)：这是 Linux 内核中处理音频硬件的低级驱动层。ALSA 负责直接与声卡硬件交互，提供设备驱动、混音器控制以及各种音频流操作。可以把它看作是音频领域的“硬件抽象层”。

## Linux主要音频架构组件

- PulseAudio：这是一个用户空间的声音服务器。它运行在 ALSA 之上，提供更高级的功能，如多应用程序音频混合、网络音频传输、硬件抽象（即插即用）、音量控制和设备管理。对于大多数桌面用户来说，PulseAudio 是默认的音频服务器，它大大简化了音频设备的管理和使用。

- PipeWire：一个相对较新的多媒体处理框架，旨在统一音频、视频和硬件输入流。PipeWire 不仅可以替代 PulseAudio，还能替代 JACK（用于专业音频的低延迟音频服务器），同时提供更好的安全性、更低的延迟以及对 Wayland 的原生支持。它正在逐渐成为 Linux 桌面音频和视频的新标准。

- JACK (JACK Audio Connection Kit)：主要用于专业音频工作站，提供超低延迟的音频处理。它允许应用程序之间以及应用程序与硬件之间进行灵活的音频连接。对于音乐制作、音频编辑等对延迟有严格要求的场景，JACK 是首选。

## 音频调用栈层次

一个典型的 Linux 音频调用栈可以这样理解，从硬件到应用程序：

1. 硬件层 (声卡/USB 音频设备)：这是最底层，负责实际的音频输入输出。

2. 内核层 (ALSA)：ALSA 驱动直接与声卡硬件通信。它提供了一个统一的 API 给上层应用程序，使得应用程序不需要关心具体的硬件细节。

3. 用户空间音频服务器层 (PulseAudio/PipeWire/JACK)：

4. PulseAudio/PipeWire 运行在 ALSA 之上，作为应用程序和 ALSA 之间的中间层。它们管理多个应用程序的音频流，进行混音，并提供统一的音量控制和设备选择。PipeWire 还可以直接与 ALSA 通信，或者通过它的 ALSA 插件来拦截对 ALSA 的调用。

5. 应用程序层 (SDL/GStreamer/WebRTC/浏览器/音乐播放器等)：最终，应用程序通过调用音频服务器（或直接调用 ALSA，但较少）的 API 来播放或录制音频。这些应用程序通常不会直接与 ALSA 交互，而是通过 PulseAudio 或 PipeWire，因为这些服务器提供了更方便、更强大的功能。
